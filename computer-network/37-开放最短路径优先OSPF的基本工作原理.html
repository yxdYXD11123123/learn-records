<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>开放最短路径优先OSPF的基本工作原理 | FlowD的学习笔记</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="计算机网络等学习笔记">
    
    <link rel="preload" href="/learn-records/assets/css/0.styles.18ec6e02.css" as="style"><link rel="preload" href="/learn-records/assets/js/app.6495bb5c.js" as="script"><link rel="preload" href="/learn-records/assets/js/2.4ac8a49c.js" as="script"><link rel="preload" href="/learn-records/assets/js/1.6b278d11.js" as="script"><link rel="preload" href="/learn-records/assets/js/15.084a8896.js" as="script"><link rel="prefetch" href="/learn-records/assets/js/10.6532383f.js"><link rel="prefetch" href="/learn-records/assets/js/11.b3421880.js"><link rel="prefetch" href="/learn-records/assets/js/12.8733a7ba.js"><link rel="prefetch" href="/learn-records/assets/js/13.5601b732.js"><link rel="prefetch" href="/learn-records/assets/js/14.f92275b5.js"><link rel="prefetch" href="/learn-records/assets/js/16.672d5904.js"><link rel="prefetch" href="/learn-records/assets/js/17.94691688.js"><link rel="prefetch" href="/learn-records/assets/js/18.d7afe5dd.js"><link rel="prefetch" href="/learn-records/assets/js/19.f3680336.js"><link rel="prefetch" href="/learn-records/assets/js/20.5787a9c8.js"><link rel="prefetch" href="/learn-records/assets/js/21.918f238b.js"><link rel="prefetch" href="/learn-records/assets/js/22.d0a87209.js"><link rel="prefetch" href="/learn-records/assets/js/23.3da2d3a2.js"><link rel="prefetch" href="/learn-records/assets/js/24.f639d22e.js"><link rel="prefetch" href="/learn-records/assets/js/25.716c5c58.js"><link rel="prefetch" href="/learn-records/assets/js/26.833983c5.js"><link rel="prefetch" href="/learn-records/assets/js/27.34efcbc8.js"><link rel="prefetch" href="/learn-records/assets/js/28.56dd3927.js"><link rel="prefetch" href="/learn-records/assets/js/29.e8b30df6.js"><link rel="prefetch" href="/learn-records/assets/js/3.13d9e079.js"><link rel="prefetch" href="/learn-records/assets/js/30.ce2d9257.js"><link rel="prefetch" href="/learn-records/assets/js/31.6bb1968d.js"><link rel="prefetch" href="/learn-records/assets/js/32.4f0f6ff5.js"><link rel="prefetch" href="/learn-records/assets/js/33.268e44ee.js"><link rel="prefetch" href="/learn-records/assets/js/34.44771ae6.js"><link rel="prefetch" href="/learn-records/assets/js/35.f9066f25.js"><link rel="prefetch" href="/learn-records/assets/js/36.83f03217.js"><link rel="prefetch" href="/learn-records/assets/js/37.effa77ea.js"><link rel="prefetch" href="/learn-records/assets/js/38.bf5e94e3.js"><link rel="prefetch" href="/learn-records/assets/js/39.8e3b9c7a.js"><link rel="prefetch" href="/learn-records/assets/js/4.0e4b8a73.js"><link rel="prefetch" href="/learn-records/assets/js/40.83712a93.js"><link rel="prefetch" href="/learn-records/assets/js/41.090e10eb.js"><link rel="prefetch" href="/learn-records/assets/js/42.1d1c266a.js"><link rel="prefetch" href="/learn-records/assets/js/43.88b63658.js"><link rel="prefetch" href="/learn-records/assets/js/44.4f983fc5.js"><link rel="prefetch" href="/learn-records/assets/js/45.6215b8a8.js"><link rel="prefetch" href="/learn-records/assets/js/46.6dac2e4a.js"><link rel="prefetch" href="/learn-records/assets/js/47.58047ff7.js"><link rel="prefetch" href="/learn-records/assets/js/48.5a8a1a72.js"><link rel="prefetch" href="/learn-records/assets/js/49.4d9493da.js"><link rel="prefetch" href="/learn-records/assets/js/5.f3951392.js"><link rel="prefetch" href="/learn-records/assets/js/50.5cd9fb5c.js"><link rel="prefetch" href="/learn-records/assets/js/51.91cd5994.js"><link rel="prefetch" href="/learn-records/assets/js/52.1c560174.js"><link rel="prefetch" href="/learn-records/assets/js/53.2b7991aa.js"><link rel="prefetch" href="/learn-records/assets/js/54.603f511d.js"><link rel="prefetch" href="/learn-records/assets/js/55.15f74fd5.js"><link rel="prefetch" href="/learn-records/assets/js/56.f49aa63c.js"><link rel="prefetch" href="/learn-records/assets/js/57.ec7e9e3b.js"><link rel="prefetch" href="/learn-records/assets/js/58.077e738e.js"><link rel="prefetch" href="/learn-records/assets/js/59.0f46b348.js"><link rel="prefetch" href="/learn-records/assets/js/6.cae41cdd.js"><link rel="prefetch" href="/learn-records/assets/js/60.1aa9babc.js"><link rel="prefetch" href="/learn-records/assets/js/61.ffa0d052.js"><link rel="prefetch" href="/learn-records/assets/js/62.c9bb8bb8.js"><link rel="prefetch" href="/learn-records/assets/js/63.ba9beab4.js"><link rel="prefetch" href="/learn-records/assets/js/64.5e841762.js"><link rel="prefetch" href="/learn-records/assets/js/7.0da72c61.js"><link rel="prefetch" href="/learn-records/assets/js/vendors~docsearch.e1949ca2.js">
    <link rel="stylesheet" href="/learn-records/assets/css/0.styles.18ec6e02.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/learn-records/" class="home-link router-link-active"><!----> <span class="site-name">FlowD的学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/learn-records/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FlowD的播客" class="dropdown-title"><span class="title">FlowD的播客</span> <span class="arrow down"></span></button> <button type="button" aria-label="FlowD的播客" class="mobile-dropdown-title"><span class="title">FlowD的播客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yxdYXD11123123" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/3737995267291101/posts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/learn-records/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FlowD的播客" class="dropdown-title"><span class="title">FlowD的播客</span> <span class="arrow down"></span></button> <button type="button" aria-label="FlowD的播客" class="mobile-dropdown-title"><span class="title">FlowD的播客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yxdYXD11123123" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/3737995267291101/posts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/learn-records/" aria-current="page" class="sidebar-link">欢迎与我一起学习</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-records/computer-network/01-因特网概述" class="sidebar-heading clickable open"><span>计算机网络</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-records/computer-network/01-因特网概述.html" class="sidebar-link">01-因特网概述</a></li><li><a href="/learn-records/computer-network/02-信息交换方式（分组交换）.html" class="sidebar-link">02-信息交换方式（分组交换）</a></li><li><a href="/learn-records/computer-network/03-计算机网络的定义.html" class="sidebar-link">03-计算机网络的定义</a></li><li><a href="/learn-records/computer-network/04-计算机网络的性能指标.html" class="sidebar-link">04-计算机网络的性能指标</a></li><li><a href="/learn-records/computer-network/05-计算机网络体系结构.html" class="sidebar-link">05-计算机网络体系结构</a></li><li><a href="/learn-records/computer-network/06-物理层的基本概念及传输媒体.html" class="sidebar-link">06-物理层的基本概念及传输媒体</a></li><li><a href="/learn-records/computer-network/07-物理层的传输方式.html" class="sidebar-link">07-物理层的传输方式</a></li><li><a href="/learn-records/computer-network/08-物理层的编码与调制.html" class="sidebar-link">08-物理层的编码与调制</a></li><li><a href="/learn-records/computer-network/09-信道的极限容量.html" class="sidebar-link">09-信道的极限容量</a></li><li><a href="/learn-records/computer-network/10-数据链路层概述.html" class="sidebar-link">10-数据链路层概述</a></li><li><a href="/learn-records/computer-network/11-封装成帧.html" class="sidebar-link">11-封装成帧</a></li><li><a href="/learn-records/computer-network/12-差错控制.html" class="sidebar-link">12-差错控制</a></li><li><a href="/learn-records/computer-network/13-可靠传输的基本概念.html" class="sidebar-link">13-可靠传输的基本概念</a></li><li><a href="/learn-records/computer-network/14-可靠传输的实现机制之停止等待协议.html" class="sidebar-link">14-可靠传输的实现机制之停止等待协议</a></li><li><a href="/learn-records/computer-network/15-可靠传输的实现机制之回退N帧协议.html" class="sidebar-link">15-可靠传输的实现机制之回退N帧协议</a></li><li><a href="/learn-records/computer-network/16-可靠传输的实现机制之选择重传协议.html" class="sidebar-link">16-可靠传输的实现机制之选择重传协议</a></li><li><a href="/learn-records/computer-network/17-点对点协议PPP.html" class="sidebar-link">17-点对点协议PPP</a></li><li><a href="/learn-records/computer-network/18-媒体接入控制的基本概念.html" class="sidebar-link">18-媒体接入控制的基本概念</a></li><li><a href="/learn-records/computer-network/19-IP地址.html" class="sidebar-link">19-IP地址</a></li><li><a href="/learn-records/computer-network/20-ARP协议.html" class="sidebar-link">20-ARP协议</a></li><li><a href="/learn-records/computer-network/21-集线器与交换机的区别.html" class="sidebar-link">21-集线器与交换机的区别</a></li><li><a href="/learn-records/computer-network/22-以太网交换机自学习和转发帧的流程.html" class="sidebar-link">22-以太网交换机自学习和转发帧的流程</a></li><li><a href="/learn-records/computer-network/23-以太网交换机的生成树协议STP.html" class="sidebar-link">23-以太网交换机的生成树协议STP</a></li><li><a href="/learn-records/computer-network/24-虚拟局域网VLAN概述.html" class="sidebar-link">24-虚拟局域网VLAN概述</a></li><li><a href="/learn-records/computer-network/25-虚拟局域网VLAN的实现机制.html" class="sidebar-link">25-虚拟局域网VLAN的实现机制</a></li><li><a href="/learn-records/computer-network/26-网络层概述.html" class="sidebar-link">26-网络层概述</a></li><li><a href="/learn-records/computer-network/27-网络层提供的两种服务.html" class="sidebar-link">27-网络层提供的两种服务</a></li><li><a href="/learn-records/computer-network/28-IPv4地址概述.html" class="sidebar-link">28-IPv4地址概述</a></li><li><a href="/learn-records/computer-network/29-分类编址的IPv4地址.html" class="sidebar-link">29-分类编址的IPv4地址</a></li><li><a href="/learn-records/computer-network/30-划分子网的IPv4地址.html" class="sidebar-link">30-划分子网的IPv4地址</a></li><li><a href="/learn-records/computer-network/31-无分类编址的IPv4地址.html" class="sidebar-link">31-无分类编址的IPv4地址</a></li><li><a href="/learn-records/computer-network/32-IPv4地址的应用规划.html" class="sidebar-link">32-IPv4地址的应用规划</a></li><li><a href="/learn-records/computer-network/33-IP数据报的发送和转发过程.html" class="sidebar-link">33-IP数据报的发送和转发过程</a></li><li><a href="/learn-records/computer-network/34-静态路由配置及其可能产生的路由环路问题.html" class="sidebar-link">34-静态路由配置及其可能产生的路由环路问题</a></li><li><a href="/learn-records/computer-network/35-路由选择协议概述.html" class="sidebar-link">35-路由选择协议概述</a></li><li><a href="/learn-records/computer-network/36-路由信息协议RIP的基本工作原理.html" class="sidebar-link">36-路由信息协议RIP的基本工作原理</a></li><li><a href="/learn-records/computer-network/37-开放最短路径优先OSPF的基本工作原理.html" class="active sidebar-link">37-开放最短路径优先OSPF的基本工作原理</a></li><li><a href="/learn-records/computer-network/38-边界网关协议BGP的基本工作原理.html" class="sidebar-link">38-边界网关协议BGP的基本工作原理</a></li><li><a href="/learn-records/computer-network/39-IPv4数据报的首部格式.html" class="sidebar-link">39-IPv4数据报的首部格式</a></li><li><a href="/learn-records/computer-network/40-网际控制报文协议ICMP.html" class="sidebar-link">40-网际控制报文协议ICMP</a></li><li><a href="/learn-records/computer-network/99-https加密过程.html" class="sidebar-link">99-https加密过程</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="开放最短路径优先ospf的基本工作原理"><a href="#开放最短路径优先ospf的基本工作原理" class="header-anchor">#</a> 开放最短路径优先OSPF的基本工作原理</h1> <ul><li><p>开放最短路径优先OSPF（Open Shorted Path First），是为克服RIP的缺点在1989年开发出来的</p> <ul><li>“开放”表明OSPF协议不是受某一家厂商控制，而是<font color="#EA0000">公开发表</font>的</li> <li>“最短路径优先” 是因为使用了Dijkstra提出的<font color="#EA0000">最短路径算法</font>SPF</li></ul></li> <li><p>OSPF是<font color="#EA0000">基于链路状态</font>的，而不像RIP那样是基于距离向量的</p></li> <li><p>OSPF采用SPF算法计算路由，从算法上保证了<font color="#EA0000">不会产生路由环路</font></p></li> <li><p>OSPF<font color="#EA0000">不限制网络规模</font>，更新效率高，<font color="#EA0000">收敛速度快</font></p></li> <li><p>链路状态是指本路由器都<font color="#EA0000">和哪些路由器相邻</font>，以及相应的<font color="#EA0000">链路的“代价”</font>（cost）</p> <ul><li><p>“代价”用来表示费用、距离、时延、带宽等待，这些都由网络管理人员来决定</p> <p><img src="/learn-records/assets/img/image-20240303153600981.3d8df640.png" alt="image-20240303153600981"></p></li></ul></li> <li><p>OSPF相邻路由器之间通过交互<font color="#aa00ff"><strong>问候（Hello）分组</strong></font>，建立和维护<font color="#EA0000">邻居关系</font></p> <p>如图所示：</p> <p><img src="/learn-records/assets/img/image-20240303162428351.d7c26492.png" alt="image-20240303162428351"></p> <ul><li><p>Hello分组封装在IP数据报中发送，发往组播地址224.0.0.5（协议为89表明是OSPF分组）</p> <p><img src="/learn-records/assets/img/image-20240303162243210.77efa80c.png" alt="image-20240303162243210"></p></li> <li><p>发送周期为10秒</p></li> <li><p>40秒未收到来自邻居路由器的Hello分组，则认为该邻居路由器不可达</p> <p><img src="/learn-records/assets/img/image-20240303162606435.d1455613.png" alt="image-20240303162606435"></p></li></ul></li> <li><p>使用OSPF的每个路由器都会产生<font color="#EA0000">链路状态通告LSA</font>（Link State Advertisement）</p> <ul><li>直连网络的链路状态信息</li> <li>邻居路由器的链路状态信息</li></ul></li> <li><p>LSA被封装在<font color="#8600FF">链路状态更新分组<strong>LSU</strong></font>中，采用<font color="#EA0000">洪泛法</font>发送（收到链路状态更新分组的路由器，将从自己其他所有接口转发该分组，进行洪泛转发）</p></li> <li><p>使用OSPF的每个路由都有一个<font color="#8600FF"><strong>链路状态数据库LSDB</strong></font>，用于存储LSA</p></li> <li><p>通过各路由器洪泛发送封装有自己LSA的LSU分组，各路由器的LSDB最终将达到一致</p> <p><img src="/learn-records/assets/img/image-20240303163508353.19e1304b.png" alt="image-20240303163508353"></p></li> <li><p>使用OSPF的各路由器<font color="#EA0000"><strong>基于LSDB进行最短路径优先SPF计算</strong></font>，构建出各自到达其他各路由器的最短路径，即构建各自的路由表。</p> <p>例如，如下的网络拓扑中，各链路旁的数字表示代价，通过上述洪泛发送各链路状态更新分组，各路由器最终会得出相同的链路状态数据库，由链路状态数据库可以得出带权有向图</p> <p><img src="/learn-records/assets/img/image-20240303164159831.e8dacae7.png" alt="image-20240303164159831"></p> <p>对该图进行Dijkstra的最短路径优先算法，就可以得出以各路由器为根的最短路径</p> <p><img src="/learn-records/assets/img/image-20240303164221045.df15686f.png" alt="image-20240303164221045"></p></li> <li><p>OSPF有以下五种分组类型：</p> <ul><li><p>类型1，<font color="#EA0000">问候</font>（Hello）分组</p> <p>用来发现和维护邻居路由器的可达性</p></li> <li><p>类型2，<font color="#EA0000">数据库描述</font>（Database Description）分组</p> <p>向邻居路由器给出自己的链路状态数据库中的所有链路状态项目的摘要信息</p></li> <li><p>类型3，<font color="#EA0000">链路状态请求</font>（Link State Request）分组</p> <p>向邻居路由器请求发送某些链路状态项目的详细信息</p></li> <li><p>类型4，<font color="#EA0000">链路状态更新</font>（Link State Update）分组</p> <p>路由器使用这种分组将其链路状态进行洪泛发送，即用洪泛对全网更新链路状态</p></li> <li><p>类型5，<font color="#EA0000">链路状态确认</font>（Link State Acknowledgment）分组</p> <p>这是对链路状态更新分组的确认分组</p></li></ul></li></ul> <h2 id="ospf的基本工作过程"><a href="#ospf的基本工作过程" class="header-anchor">#</a> OSPF的基本工作过程：</h2> <ul><li>相邻路由器之间周期性发送问候分组，以便建立和维护邻居关系</li> <li>建立邻居关系后，给邻居路由器发送数据库描述分组（将自己的链路状态数据库中的所有链路状态项目的摘要信息发送给邻居路由器）</li> <li>例如，R1收到R2的数据库描述分组后，发现自己缺少其中的某些链路状态项目，于是就给R2发送链路状态请求分组</li> <li>R2收到后，将R1所缺少的链路状态项目的详细信息封装在链路状态更新分组中发送给R1；</li> <li>R1收到后添加到自己的链路状态数据库中，并给R2发送链路状态确认分组</li> <li>最终R1和R2的链路状态数据库达到同步</li> <li>后面，每30分组或链路状态发生变化时，路由器都会发送链路状态更新分组，收到该分组的其他路由器将洪泛转发该分组，并给该路由器发回链路状态确认分组（这又称为新情况下的链路状态数据库同步）</li></ul> <p><img src="/learn-records/assets/img/image-20240303172903758.9fb80920.png" alt="image-20240303172903758"></p> <h3 id="ospf在多点接入网络中路由器邻居关系的建立"><a href="#ospf在多点接入网络中路由器邻居关系的建立" class="header-anchor">#</a> OSPF在多点接入网络中路由器邻居关系的建立</h3> <p>当OSPF路由器在多点接入网络中建立邻居关系时，如果不采用其他机制，将会产生大量的多播分组</p> <p>例如，下图5台路由器连接在同一个多点接入网络中，周期性地发送问候分组以建立和维护邻居关系</p> <p><img src="/learn-records/assets/img/image-20240303173239244.e4f0dd03.png" alt="image-20240303173239244"></p> <p>这些路由器中的任意两个路由器都互为邻居关系，如图所示：</p> <p><img src="/learn-records/assets/img/image-20240303173413798.cec6ced6.png" alt="image-20240303173413798"></p> <p>邻居关系的数量为 n(n-1)/2，其中n是路由器数量，每个路由器要向其他(n-1)个路由器发送问候分组，和链路状态更新分组</p> <p>为了减少所发送分组的数量，</p> <ul><li><p>OSPF采用 选举<font color="#EA0000">指定路由器DR</font>（designated router）和<font color="#EA0000">备用指定路由器BDR</font>（backup designated router）</p></li> <li><p><font color="#EA0000">所有非DR/BDR只与DR/BDR建立邻居关系</font>，如图所示：</p> <p><img src="/learn-records/assets/img/image-20240303174031547.e9d81567.png" alt="image-20240303174031547"></p> <p>之前的邻居关系数量就降低为 2(n-2)+1</p></li> <li><p>非DR/BDR之间必须通过DR/BDR交互信息</p></li></ul> <h3 id="区域"><a href="#区域" class="header-anchor">#</a> 区域</h3> <p>为了使OSPF能够用于规模很大的网络，OSPF把一个自治系统再划分为若干个更小的范围，叫做<font color="#EA0000">区域</font>（Area）</p> <p>每个区域都有一个32比特的区域标识符，可以用点分十进制表示</p> <p>例如，<strong>主干区域</strong>为0.0.0.0，<strong>主干区域</strong>用于<font color="#EA0000">连通其他区域</font>，其他区域标识符不能为0，且互不相同</p> <p><img src="/learn-records/assets/img/image-20240303175013715.9d376c15.png" alt="image-20240303175013715"></p> <p>每个区域的规模不应太大，一般所包含路由器不应超过200个；</p> <p>划分区域的好处就是：<font style="background-color:#ff0;">把利用洪泛法交换链路状态信息的范围局限于每一个区域而不是整个自治系统，这样就减少了整个网络上的通信量</font>。</p> <p>如果所有路由器接口都在同一个区域内，则该路由器称为<strong>区域内路由器</strong></p> <p>为了区域之间连通，每个区域都会有一个<strong>区域边界路由器</strong>，它的一个接口用于连接自身所在区域，另一个接口用于连接主干区域</p> <p>主干区域内的路由器，称为<strong>主干路由器</strong></p> <p>在主干区域内，还要有一个路由器专门和本自治系统外的其他自治系统交换信息，称为<strong>自治系统边界路由器</strong></p> <p><img src="/learn-records/assets/img/image-20240303175723851.cbb462da.png" alt="image-20240303175723851"></p> <p>各区域边界路由器转发的LSA：</p> <p><img src="/learn-records/assets/img/image-20240303175934285.5c1d3b00.png" alt="image-20240303175934285"></p> <p>采用分层次划分区域的方法，虽然使交换信息的种类增多了，同时也使OSPF协议更加复杂了，但这样做，却能使每个区域内部交换路由信息的通信量大大减少，因而使OSPF协议能够用于规模很大的自治系统中。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/learn-records/computer-network/36-路由信息协议RIP的基本工作原理.html" class="prev">
        36-路由信息协议RIP的基本工作原理
      </a></span> <span class="next"><a href="/learn-records/computer-network/38-边界网关协议BGP的基本工作原理.html">
        38-边界网关协议BGP的基本工作原理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/learn-records/assets/js/app.6495bb5c.js" defer></script><script src="/learn-records/assets/js/2.4ac8a49c.js" defer></script><script src="/learn-records/assets/js/1.6b278d11.js" defer></script><script src="/learn-records/assets/js/15.084a8896.js" defer></script>
  </body>
</html>
