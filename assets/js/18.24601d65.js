(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{444:function(t,v,_){t.exports=_.p+"assets/img/image-20240217104931446.9cfc0785.png"},445:function(t,v,_){t.exports=_.p+"assets/img/image-20240217152357924.2db363f7.png"},446:function(t,v,_){t.exports=_.p+"assets/img/image-20240217155849231.bc024a58.png"},447:function(t,v,_){t.exports=_.p+"assets/img/image-20240217160325010.7e7cf0eb.png"},448:function(t,v,_){t.exports=_.p+"assets/img/image-20240217160415118.3428abd6.png"},449:function(t,v,_){t.exports=_.p+"assets/img/image-20240217161000171.2700e94c.png"},450:function(t,v,_){t.exports=_.p+"assets/img/image-20240217162310709.6d8adc0b.png"},451:function(t,v,_){t.exports=_.p+"assets/img/image-20240217162847800.40fd1e03.png"},452:function(t,v,_){t.exports=_.p+"assets/img/image-20240217162722082.c68f7205.png"},453:function(t,v,_){t.exports=_.p+"assets/img/image-20240217162942083.1f41a770.png"},454:function(t,v,_){t.exports=_.p+"assets/img/image-20240217164209482.6d164fff.png"},555:function(t,v,_){"use strict";_.r(v);var s=_(14),r=Object(s.a)({},(function(){var t=this,v=t._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"虚拟局域网vlan的实现机制"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#虚拟局域网vlan的实现机制"}},[t._v("#")]),t._v(" 虚拟局域网VLAN的实现机制")]),t._v(" "),v("p",[t._v("虚拟局域网VLAN技术是在交换机上实现的，需要交换机能够实现以下两大功能：")]),t._v(" "),v("ul",[v("li",[t._v("能够处理带"),v("font",{attrs:{color:"#8600FF"}},[v("strong",[t._v("有VLAN标记的帧")])]),t._v("，也就是"),v("strong",[t._v("IEEE 802.1Q帧")])],1),t._v(" "),v("li",[t._v("交换机的各端口可以"),v("font",{attrs:{color:"#EA0000"}},[v("strong",[t._v("支持不同的端口类型")])]),t._v("，不同端口类型的端口对帧的处理方式有所不同")],1)]),t._v(" "),v("h2",{attrs:{id:"ieee-802-1q帧"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ieee-802-1q帧"}},[t._v("#")]),t._v(" IEEE 802.1Q帧")]),t._v(" "),v("ul",[v("li",[t._v("IEEE 802.1Q帧（也称Dot One Q帧）对以太网的MAC帧格式进行了扩展，"),v("font",{attrs:{color:"#EA0000"}},[t._v("插入了4字节的VLAN标记")]),t._v("，如图所示："),v("img",{attrs:{src:_(444),alt:"image-20240217104931446"}})],1),t._v(" "),v("li",[t._v("VLAN标记的"),v("strong",[t._v("最后12比特")]),t._v("称为"),v("font",{attrs:{color:"#8600FF"}},[v("strong",[t._v("VLAN标识符VID")])]),t._v("，它唯一地标志了以太网帧属于哪一个VLAN\n"),v("ul",[v("li",[t._v("VID的取值范围是0~4095，"),v("font",{attrs:{color:"#EA0000"}},[t._v("有效取值范围是 1~ 4094")])],1)])],1),t._v(" "),v("li",[v("strong",[t._v("802.1Q帧")]),t._v("是"),v("font",{attrs:{color:"#EA0000"}},[t._v("由交换机来处理的")]),t._v("，而不是用户主机来处理的\n"),v("ul",[v("li",[t._v("当交换机"),v("font",{attrs:{color:"#EA0000"}},[t._v("收到普通的以太网帧")]),t._v("时，会将其插入4字节的VLAN标记转变为802.1Q帧，简称“"),v("font",{attrs:{color:"#EA0000"}},[t._v("打标签")]),t._v("”")],1),t._v(" "),v("li",[t._v("当交换机"),v("font",{attrs:{color:"#EA0000"}},[t._v("转发802.1Q帧")]),t._v("时，可能会删除其4字节VLAN标记转变为普通以太网帧，简称“"),v("font",{attrs:{color:"#EA0000"}},[t._v("去标签")]),t._v("”")],1)])],1)]),t._v(" "),v("h2",{attrs:{id:"交换机的端口类型"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#交换机的端口类型"}},[t._v("#")]),t._v(" 交换机的端口类型")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("交换机的端口类型由以下三种：")]),t._v(" "),v("ul",[v("li",[t._v("Access")]),t._v(" "),v("li",[t._v("Trunk")]),t._v(" "),v("li",[t._v("Hybird")])])]),t._v(" "),v("li",[v("p",[t._v("交换机各端口的"),v("font",{attrs:{color:"#8600FF"}},[v("strong",[t._v("缺省VLAN ID")])]),t._v("（默认的VLAN ID）")],1),t._v(" "),v("ul",[v("li",[t._v("在思科交换机上称为Native VLAN，即"),v("font",{attrs:{color:"#8600FF"}},[v("strong",[t._v("本征VLAN")])]),t._v("（例如，思科交换机在用户未配置VLAN时，所有端口都"),v("strong",[t._v("默认属于VLAN1")]),t._v("，也就是所有端口的本征VLAN都是VLAN1）")],1),t._v(" "),v("li",[t._v("在华为交换机上称为Port VLAN ID，即"),v("font",{attrs:{color:"#8600FF"}},[v("strong",[t._v("端口VLAN ID")])]),t._v("，简记为"),v("font",{attrs:{color:"#8600FF"}},[v("strong",[t._v("PVID")])])],1)]),t._v(" "),v("p",[t._v("交换机的每个端口有且仅有一个PVID")])])]),t._v(" "),v("h3",{attrs:{id:"access端口"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#access端口"}},[t._v("#")]),t._v(" Access端口")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("Access端口一般用于"),v("strong",[t._v("连接用户计算机")])])]),t._v(" "),v("li",[v("p",[t._v("Access端口"),v("font",{attrs:{color:"#EA0000"}},[t._v("只能属于一个VLAN")])],1)]),t._v(" "),v("li",[v("p",[t._v("Access端口的PVID值与端口所属VLAN的ID相同（默认为1）")]),t._v(" "),v("p",[t._v("如图所示：")]),t._v(" "),v("p",[v("img",{attrs:{src:_(445),alt:"image-20240217152357924"}})]),t._v(" "),v("p",[t._v("主机A、B、C、D分别连接在交换机的一个端口上，交换机首次上电时，默认配置各端口属于VLAN1，也就是各端口的PVID值等于1，默认配置各端口的类型为Access，用大写A来表示")])]),t._v(" "),v("li",[v("p",[t._v("Access端口接收帧的处理方法：")]),t._v(" "),v("p",[t._v("一般只接受**“未打标签”的普通以太网MAC帧**，根据接收帧的端口的PVID给帧“"),v("font",{attrs:{color:"#EA0000"}},[t._v("打标签")]),t._v("”，即插入4字节VLAN标记字段，字段中的"),v("font",{attrs:{color:"#EA0000"}},[t._v("VID取值与端口的PVID取值相等")])],1)]),t._v(" "),v("li",[v("p",[t._v("Access端口发送帧的处理方法：")]),t._v(" "),v("p",[t._v("若帧中的"),v("font",{attrs:{color:"#EA0000"}},[t._v("VID与端口的PVID相等")]),t._v("，则“"),v("font",{attrs:{color:"#EA0000"}},[t._v("去标签")]),t._v("”并转发该帧，否则不转发")],1),t._v(" "),v("p",[v("img",{attrs:{src:_(446),alt:"image-20240217155849231"}})])])]),t._v(" "),v("p",[t._v("如果我们将主机A、B划分为VLAN2，主机C、D划分为VLAN3，则交换机转发广播帧的流程如下图所示：")]),t._v(" "),v("ul",[v("li",[t._v("主机A发送广播帧时：")])]),t._v(" "),v("p",[v("img",{attrs:{src:_(447),alt:"image-20240217160325010"}})]),t._v(" "),v("ul",[v("li",[t._v("主机C发送广播帧时：")])]),t._v(" "),v("p",[v("img",{attrs:{src:_(448),alt:"image-20240217160415118"}})]),t._v(" "),v("h3",{attrs:{id:"trunk-端口"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#trunk-端口"}},[t._v("#")]),t._v(" Trunk 端口")]),t._v(" "),v("ul",[v("li",[t._v("Trunk端口一般用于交换机之间或交换机与路由器之间的互连")]),t._v(" "),v("li",[t._v("Trunk端口可以属于多个VLAN")]),t._v(" "),v("li",[t._v("用户可以设置Trunk端口的PVID值，默认情况下，Trunk端口的PVID值为1")])]),t._v(" "),v("p",[t._v("举例说明Trunk端口的功能：")]),t._v(" "),v("p",[v("img",{attrs:{src:_(449),alt:"image-20240217161000171"}})]),t._v(" "),v("p",[t._v("如图所示，两台交换机互连而成了一个交换式以太网，我们的应用需求是将主机A、B、E、F划归到VLAN1，将主机C、D、G、H划归到VLAN2，由于交换机首次上电时默认配置各端口属于VLAN1，其相应的PVID值等于1，并且端口的类型为Access，因此我们需要对交换机进行相应的配置才能满足应用需求：分别在两个交换机上创建VLAN2，并将它们的端口3和4划归到VLAN2，其相应的PVID值等于2，而两个交换机的端口1和2保持默认配置即可，也就是属于VLAN1，其相应的PVID值等于1；需要将两个交换机互连的端口5 端口类型改为Trunk类型，PVID值保持默认的1即可。")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("Trunk端口的发送处理方法是：")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("对VID等于PVID的帧，“去标签”再转发，如图：")]),t._v(" "),v("p",[v("img",{attrs:{src:_(450),alt:"image-20240217162310709"}})])]),t._v(" "),v("li",[v("p",[t._v("对VID不等于PVID的帧，直接转发")]),t._v(" "),v("p",[v("img",{attrs:{src:_(451),alt:"image-20240217162847800"}})])])])]),t._v(" "),v("li",[v("p",[t._v("Trunk端口接收处理的方法：")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("接收“未打标签”的帧，根据接收帧的端口PVID给帧“打标签”，即插入4字节VLAN标记字段，字段中的VID取值与端口的PVID取值相等。")]),t._v(" "),v("p",[v("img",{attrs:{src:_(452),alt:"image-20240217162722082"}})])]),t._v(" "),v("li",[v("p",[t._v("接收”已打标签“的帧，直接转发")]),t._v(" "),v("p",[v("img",{attrs:{src:_(453),alt:"image-20240217162942083"}})])])])])]),t._v(" "),v("h3",{attrs:{id:"hybrid端口"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#hybrid端口"}},[t._v("#")]),t._v(" Hybrid端口")]),t._v(" "),v("p",[t._v("属于华为交换机私有的Hybrid端口类型")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("Hybrid端口既可用于交换机之间或交换机与路由器之间的互连（同Trunk端口），也可用于交换机与用户计算机之间的互连（同Access端口）")])]),t._v(" "),v("li",[v("p",[t._v("Hybrid端口可以属于多个VLAN（同Trunk端口）")])]),t._v(" "),v("li",[v("p",[t._v("用户可以设置Hybrid端口的PVID值，默认情况下，Hybrid端口的PVID值为1（同Trunk端口）")])]),t._v(" "),v("li",[v("p",[t._v("每个端口都有自己的一个"),v("font",{attrs:{color:"#8600FF"}},[v("strong",[t._v("去标签列表")])])],1)]),t._v(" "),v("li",[v("p",[t._v("Hybrid端口发送处理方法（"),v("font",{attrs:{color:"#EA0000"}},[t._v("与Trunk端口不同")]),t._v("）")],1),t._v(" "),v("p",[t._v("查看帧的VID"),v("strong",[t._v("是否在端口的”去标签“列表")]),t._v("中：")]),t._v(" "),v("ul",[v("li",[t._v("若存在，则”去标签“后再转发")]),t._v(" "),v("li",[t._v("若不存在，则直接转发")])])]),t._v(" "),v("li",[v("p",[t._v("Hybrid端口接收处理方法（同Trunk端口）")]),t._v(" "),v("ul",[v("li",[t._v("接收”未打标签“的帧，根据接收帧的端口的PVID给帧”打标签“，即插入4字节VLAN标记字段，字段中的VID取值与端口的PVID取值相等")]),t._v(" "),v("li",[t._v("接收”已达标签“的帧")])])])]),t._v(" "),v("p",[v("img",{attrs:{src:_(454),alt:"image-20240217164209482"}})])])}),[],!1,null,null,null);v.default=r.exports}}]);