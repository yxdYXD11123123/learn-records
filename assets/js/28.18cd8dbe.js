(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{381:function(t,o,v){t.exports=v.p+"assets/img/image-20231217172911772.87deb70e.png"},382:function(t,o,v){t.exports=v.p+"assets/img/image-20231217174254153.a44deaf1.png"},383:function(t,o,v){t.exports=v.p+"assets/img/image-20231217183103751.d95f0b7c.png"},384:function(t,o,v){t.exports=v.p+"assets/img/image-20231217185537922.6d3f238d.png"},417:function(t,o,v){"use strict";v.r(o);var _=v(14),r=Object(_.a)({},(function(){var t=this,o=t._self._c;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h2",{attrs:{id:"可靠传输的实现机制-停止-等待协议"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#可靠传输的实现机制-停止-等待协议"}},[t._v("#")]),t._v(" 可靠传输的实现机制：停止-等待协议")]),t._v(" "),o("p",[t._v("三种可靠传输的实现机制："),o("font",{attrs:{color:"#8600FF"}},[t._v("停止-等待协议 SW")]),t._v("、"),o("font",{attrs:{color:"#8600FF"}},[t._v("回退 N 帧协议 GBN")]),t._v("、"),o("font",{attrs:{color:"#8600FF"}},[t._v("选择重传协议 SR")])],1),t._v(" "),o("ul",[o("li",[t._v("这三种可靠传输实现机制的基本原理并"),o("font",{attrs:{color:"#EA0000"}},[t._v("不仅限于数据链路层")]),t._v("，可以应用到计算机网络体系结构的各层协议中")],1),t._v(" "),o("li",[t._v("不要把思维局限在数据链路层，而应该放眼于整个网络体系结构")])]),t._v(" "),o("h3",{attrs:{id:"停止-等待协议-stop-and-wait"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#停止-等待协议-stop-and-wait"}},[t._v("#")]),t._v(" 停止-等待协议（Stop-and-Wait）")]),t._v(" "),o("img",{attrs:{src:v(381),alt:"image-20231217172911772"}}),t._v(" "),o("ul",[o("li",[t._v("收发双方基于互联网进行通信")]),t._v(" "),o("li",[t._v("纵坐标为时间")]),t._v(" "),o("li",[t._v("发送方发送数据分组，接收方收到后对其进行"),o("font",{attrs:{color:"#EA0000"}},[t._v("差错检测")])],1),t._v(" "),o("li",[t._v("若"),o("font",{attrs:{color:"#EA0000"}},[t._v("没有误码")]),t._v("，则接收该数据分组，并给发送方发送"),o("font",{attrs:{color:"#8600FF"}},[t._v("确认分组")]),t._v("，简称"),o("font",{attrs:{color:"#8600FF"}},[t._v("ACK")])],1),t._v(" "),o("li",[t._v("发送方收到对所发送数据分组的确认分组后，才能"),o("font",{staticStyle:{"background-color":"#ff0"}},[t._v("发送下一个数据分组")])],1),t._v(" "),o("li",[t._v("若数据分组"),o("font",{attrs:{color:"#EA0000"}},[t._v("出现误码")]),t._v("，接收方收到后进行差错检测，发现了误码，则"),o("font",{attrs:{color:"#EA0000"}},[t._v("丢弃该数据分组")])],1),t._v(" "),o("li",[t._v("并给发送方发送"),o("font",{attrs:{color:"#8600FF"}},[t._v("否认分组")]),t._v("，简称"),o("font",{attrs:{color:"#8600FF"}},[t._v("NAK")])],1),t._v(" "),o("li",[t._v("发送方收到否认分组后，知道之前发送的数据分组出现差错被丢弃，立刻"),o("font",{staticStyle:{"background-color":"#ff0"}},[t._v("重传该数据分组")])],1),t._v(" "),o("li",[t._v("因此，发送方每发送完一个数据分组后，并不能立刻将该数据分组从缓存中删除\n"),o("ul",[o("li",[o("font",{attrs:{color:"#EA0000"}},[t._v("只有在收到该数据分组的确认分组后，才能从缓存中删除")])],1),t._v(" "),o("li",[t._v("因此发送方每发送一个分组后，都要停止发送下一个分组，等待"),o("font",{attrs:{color:"#8600FF"}},[t._v("ACK 或 NAK")])],1)])])]),t._v(" "),o("img",{attrs:{src:v(382),alt:"image-20231217174254153"}}),t._v(" "),o("blockquote",[o("ul",[o("li",[t._v("如果接收方收不到数据分组，就不会发送"),o("font",{attrs:{color:"#8600FF"}},[t._v("ACK")]),t._v("或"),o("font",{attrs:{color:"#8600FF"}},[t._v("NAK")]),t._v("，发送方就会"),o("font",{attrs:{color:"#EA0000"}},[t._v("一直处于等待")]),t._v("接收方"),o("font",{attrs:{color:"#8600FF"}},[t._v("ACK 或 NAK")]),t._v("的状态")],1),t._v(" "),o("li",[t._v("为解决该问题，可以在发送方发送完一个数据分组时，启动一个"),o("font",{attrs:{color:"#EA0000"}},[t._v("超时定时器")])],1),t._v(" "),o("li",[t._v("若到了超时定时器所设置的重传时间而发送方仍然收不到接收方的任何 ACK 或 NAK，则重传原来的数据分组，这就叫做"),o("font",{attrs:{color:"#8600FF"}},[t._v("超时重传")]),t._v("。")],1),t._v(" "),o("li",[t._v("一般可将重传时间选为略大于“从发送方到接收方的平均往返时间”")])])]),t._v(" "),o("img",{attrs:{src:v(383),alt:"image-20231217183103751"}}),t._v(" "),o("p",[t._v("既然发送方的数据分组可能丢失，那么接收方的确认/否认分组也有可能丢失")]),t._v(" "),o("ul",[o("li",[o("p",[t._v("发送方发送数据分组")])]),t._v(" "),o("li",[o("p",[t._v("接收方发送确认分组，但该确认分组在传输过程中丢失了")])]),t._v(" "),o("li",[o("p",[t._v("这就会造成：发送方对之前所发送的数据分组的超时重传")])]),t._v(" "),o("li",[o("p",[t._v("重传的数据分组也正确到达了接收方")]),t._v(" "),o("ul",[o("li",[t._v("问题来了："),o("font",{staticStyle:{"background-color":"#ff0"}},[t._v("接收方如何判断这是一个重复分组？")])],1)]),t._v(" "),o("blockquote",[o("p",[t._v("为了避免分组重复这种传输错误，必须给每个分组带上"),o("font",{attrs:{color:"#EA0000"}},[t._v("序号")]),t._v("。")],1),t._v(" "),o("p",[t._v("对于停止-等待协议，由于每发送一个数据分组就停止等待，只要保证每发送一个新的数据分组，其发送序号与上次发送的数据分组的序号不同就可以了，因此，只用"),o("font",{attrs:{color:"#EA0000"}},[t._v("一个比特来编号")]),t._v("就够了")],1)])]),t._v(" "),o("li",[o("p",[t._v("根据"),o("font",{attrs:{color:"#8600FF"}},[t._v("数据分组的序号")]),t._v("，接收方就可以判断出这是一个重复的分组，丢弃该重复的数据分组，并给发送方返回 ACK")],1)]),t._v(" "),o("li",[o("p",[t._v("发送方收到针对 0 号数据分组的确认分组，就可以发送下一个数据分组了，其序号为 1")])]),t._v(" "),o("li",[o("p",[t._v("接收方正确收到数据分组后，给发送方")])])]),t._v(" "),o("img",{attrs:{src:v(384),alt:"image-20231217185537922"}})])}),[],!1,null,null,null);o.default=r.exports}}]);